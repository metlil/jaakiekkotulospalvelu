{% extends "layout.html" %}
{% from 'games/game_macros.html' import lineup, goal_form, goals %}

{% block body %}
    <div class="row">
        <div class="col-4">
            <form method="POST" action="{{ url_for('game_page', game_id = game_id) }}">
                {% include 'games/game_basic_information.html' %}
                {% if game_status=='SCHEDULED' %}
                    <div class="row">
                        <div class="col-6">
                            <input type="submit" name="update_game" value="Update game information"/>
                        </div>
                        <div class="col-6">
                            <input type="submit" name="confirm_game" value="Confirm game information"/>
                        </div>
                    </div>
                {% endif %}
            </form>
        </div>
        {% if game_status!='SCHEDULED' %}
            <div class="col-8">
                <form method="POST" action="{{ url_for('game_page', game_id = game_id) }}">
                    <div class="row">
                        <div class="col-6">
                            <h3>Home team lineup</h3>
                            {{ lineup(game_lineup_form.home_lineup.lineup_entries) }}
                        </div>
                        <div class="col-6">
                            <h3>Guest team lineup</h3>
                            {{ lineup(game_lineup_form.guest_lineup.lineup_entries) }}
                        </div>
                    </div>
                    {% if game_status == 'STARTING' %}
                        <div class="row">
                            <input type="submit" name="confirm_lineup" value="Confirm game lineup"/>
                        </div>
                    {% endif %}
                </form>
            </div>
        {% endif %}
    </div>

    <div class="row">
        {% if home_team_goals is defined %}
            <div class="col-6">
                <h3>Home team goals</h3>
                {% if game_status == 'ONGOING' %}
                    {{ goal_form(game_id, home_goals_form) }}
                {% endif %}
                {{ goals(home_team_goals) }}
            </div>
        {% endif %}
        {% if guest_team_goals is defined %}
            <div class="col-6">
                <h3>Guest team goals</h3>
                {% if game_status == 'ONGOING' %}
                    {{ goal_form(game_id, guest_goals_form) }}
                {% endif %}
                {{ goals(guest_team_goals) }}
            </div>
        {% endif %}
    </div>
    {% if game_status == 'ONGOING' %}
        <form method="POST" action="{{ url_for('finish_game', game_id = game_id) }}">
            <input type="submit" value="Finish game"/>
        </form>
    {% endif %}
    <form method="POST" action="{{ url_for('game_delete', game_id = game_id) }}">
        <input type="submit" value="Delete game"/>
    </form>
{% endblock %}